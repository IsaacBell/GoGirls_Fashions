
<%=  render :partial => 'layouts/navbarInner' %>






<main>

  <h1>Product</h1>


  <div>
    <%= @product.name %>
  </div>
  <% @product.images.each do |i| %>
    <%= cl_image_tag i, :class=>"productListThumb"  %>
  <% end %>
  <div>
    <%= link_to "Edit", edit_product_path(@product.id)%>
    <%= link_to "Delete", product_path(@product.id),
                                :method=>"delete", :data=>{:confirm=>"Are you sure?"} %>
    <% if @current_user.present? %>
      <div class="button-center">
        <% if @current_user.already_likes?(@product) %>
          <%= link_to "Remove Favourite", product_favourite_path(:product_id=>@product.id, :user_id=>@current_user.id),
                                :method=>"delete" %>
        <% else %>
          <%= link_to "Add Favourite", product_favourites_path(:product_id=>@product.id, :user_id=>@current_user.id),
                                :method=>"post" %>
        <% end %>
      </div>
      <div>
        <% if flash[:error].present? %>
          <p class="bg-danger"><%= flash[:error] %></p>
        <% end %>
        <% if flash[:msg].present? %>
          <p class="bg-danger"><%= flash[:msg] %></p>
        <% end %>
        <%= button_to "Add to cart", product_line_items_path(product_id: @product.id) %>
      </div>
      <div>
        <h2>Reviews</h2>
        <% @product.reviews.each do |review| %>
          <p>
            <strong>Review:</strong>
            <%= review.desc %>
          </p>
        <% end %>

        <h4>Add review</h4>
        <%= form_for([@product, @product.reviews.build]) do |f| %>
        <%= hidden_field_tag :user_id, @current_user.id %>
        <div class="form-group">
          <%= f.label :desc %><br>
          <%= f.text_area :desc, :class=>"form-control textfield-border"  %>
        </div>
        <div class="button-center">
          <%= f.submit :class=>"btn btn-primary" %>
        </div>
        <% end %>
      </div>
    <% end %>

  </div>
  </div>
</main>
